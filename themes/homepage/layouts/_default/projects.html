{{ define "main" }}
<div id="portfolio">
 {{ range $index, $project := $.Site.Data.projects }}
   <article class="project">
      <div class="project-headline">
         <h2> {{ $project.name }} </h2>
         <div class="project-subtitle">
            <span>{{ $project.company }}</span>
            <span class="separator"></span>
            <address>{{ $project.location }}</address>
         </div>
      </div>

      <section id="description">
      {{ .description | $.RenderString }}
      </section>

      {{ with $project.role }}
      <section id="role">
         <h4>Role</h4>
         <span>{{ . }}</span>
      </section>
      {{ end }}


      {{ with $project.time }}
      <section id="time-frame">
         <h4>Time Frame</h4>
         {{ $dateFormat := "January 2006" }}
         {{ $begin := time.AsTime .begin }}
         {{ $beginText := $begin.Format $dateFormat }}
         {{ $endText := "Now" }}
         {{ if .end }}
         {{ $end := time.AsTime .end }}
         {{ $endText = $end.Format $dateFormat }}
         {{ end }}
         <span>{{ $beginText }} - {{ $endText }}</span>
      </section>
      {{ end }}

      {{ with $project.tasks }}
      <section id="tasks">
         <h4>Tasks</h4>
         <ul>
         {{ range . }}
            <li>{{ . }}</li>
         {{ end }}
         </ul>
      </section>
      {{ end }}

      {{ with $project.features }}
      <section id="features">
         <h4>My Features</h4>
         <ul>
         {{ range . }}
            <li>{{ . }}</li>
         {{ end }}
         </ul>
      </section>
      {{ end }}

      {{ with $project.technology }}
         <section id="technology">
         <h4>Technology</h4>
         <ul class="keywords">
         {{ range . }}
         <li class="keyword">{{ . }}</li>   
         {{ end }}
         </ul>
         </section>
      {{ end }}
   </article>

   {{ end }}
</div>
{{ end }}